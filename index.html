<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù…Ø®ØªØ¨Ø± Ø£Ø¨Ùˆ Ø³Ù…Ø±Ø© Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ | Abu Samra Lab</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… Ø§Ù„ÙØ®Ù… --- */
        :root {
            --bg-dark: #0f0f13;
            --panel-bg: rgba(30, 30, 40, 0.8);
            --gold: #d4af37;
            --accent-blue: #00d2ff;
            --accent-red: #ff4757;
            --text-main: #ffffff;
            --beaker-glass: rgba(255, 255, 255, 0.15);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at top, #1a1a20, #000);
            color: var(--text-main);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© */
        header {
            padding: 15px;
            text-align: center;
            border-bottom: 2px solid var(--gold);
            background: rgba(0,0,0,0.5);
            z-index: 10;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        header h1 { color: var(--gold); font-size: 1.2rem; margin-bottom: 5px; }
        header p { font-size: 0.8rem; color: #aaa; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± (Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠ) */
        #elements-scroll {
            padding: 15px;
            background: rgba(255,255,255,0.05);
            overflow-x: auto;
            white-space: nowrap;
            border-bottom: 1px solid #333;
            scrollbar-width: none; /* Ø§Ø®ÙØ§Ø¡ Ø§Ù„Ø³ÙƒØ±ÙˆÙ„ */
        }
        #elements-scroll::-webkit-scrollbar { display: none; }

        .element-card {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 70px;
            height: 70px;
            background: linear-gradient(145deg, #2a2a35, #1f1f25);
            border: 1px solid #444;
            border-radius: 12px;
            margin: 0 5px;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        
        .element-card:active { transform: scale(0.9); border-color: var(--gold); }
        .element-symbol { font-size: 1.4rem; font-weight: 900; color: var(--gold); }
        .element-name { font-size: 0.6rem; color: #ccc; margin-top: 2px; }
        
        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø© */
        .type-gas { border-top: 3px solid #ff4757; } /* ØºØ§Ø²Ø§Øª */
        .type-solid { border-top: 3px solid #2ed573; } /* Ù…Ø¹Ø§Ø¯Ù† */
        .type-liquid { border-top: 3px solid #1e90ff; } /* Ø³ÙˆØ§Ø¦Ù„ */

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ (Workbench) */
        #workbench {
            flex: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.05) 0%, rgba(0,0,0,0) 70%);
        }

        #mix-zone {
            width: 90%;
            height: 250px;
            background: rgba(255, 255, 255, 0.03);
            border: 2px dashed rgba(212, 175, 55, 0.3);
            border-radius: 20px;
            display: flex;
            align-items: flex-end; /* Ø§Ù„Ø£ÙƒÙˆØ§Ø¨ ØªÙƒÙˆÙ† ØªØ­Øª */
            justify-content: center;
            flex-wrap: wrap;
            padding: 20px;
            gap: 15px;
            transition: 0.3s;
            position: relative;
        }

        #mix-zone.active { border-color: var(--gold); background: rgba(212, 175, 55, 0.05); }

        .beaker {
            width: 60px;
            height: 80px;
            background: var(--beaker-glass);
            border: 1px solid rgba(255,255,255,0.4);
            border-top: none;
            border-radius: 0 0 10px 10px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: hidden;
        }

        .beaker::before {
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%;
            height: 60%; /* Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¦Ù„ */
            background: var(--liquid-color, #00d2ff);
            opacity: 0.7;
            transition: 0.5s;
            filter: blur(1px);
        }
        
        /* ÙÙ‚Ø§Ø¹Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙˆØ¨ */
        .beaker::after {
            content: ''; position: absolute; width: 5px; height: 5px;
            background: rgba(255,255,255,0.6); border-radius: 50%;
            bottom: 10px; left: 50%;
            animation: bubbles 1s infinite;
        }

        .beaker span { z-index: 2; font-weight: bold; font-size: 1.2rem; text-shadow: 0 2px 2px black; }

        @keyframes bubbles {
            0% { transform: translateY(0) scale(1); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(-40px) scale(1.5); opacity: 0; }
        }

        @keyframes popIn { from { transform: scale(0) translateY(20px); } to { transform: scale(1) translateY(0); } }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        #result-area {
            width: 90%;
            margin-top: 20px;
            padding: 15px;
            background: var(--panel-bg);
            border-radius: 15px;
            border-right: 4px solid var(--gold);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .result-text h3 { color: var(--gold); margin-bottom: 5px; }
        .result-text p { font-size: 0.9rem; font-family: 'Courier New', monospace; direction: ltr; text-align: right; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 25px;
            border-radius: 30px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-mix { background: var(--gold); color: #000; }
        .btn-mix:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--gold); }
        
        .btn-reset { background: #333; color: #fff; border: 1px solid #555; }
        .btn-reset:active { transform: scale(0.95); }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ù†ÙØ¬Ø§Ø± */
        #explosion-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 71, 87, 0.0);
            pointer-events: none;
            z-index: 99;
            display: flex;
            align-items: center; justify-content: center;
            font-size: 5rem;
            opacity: 0;
            transition: 0.3s;
        }
        
        .boom-anim { animation: boom 0.5s ease-out; }
        
        @keyframes boom {
            0% { background: rgba(255, 71, 87, 0.8); opacity: 1; transform: scale(1); }
            100% { background: rgba(255, 71, 87, 0); opacity: 0; transform: scale(1.5); }
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ */
        .max-alert {
            position: absolute; top: 10px;
            background: var(--accent-red); color: white;
            padding: 5px 15px; border-radius: 20px; font-size: 0.8rem;
            opacity: 0; transition: 0.3s;
        }

    </style>
</head>
<body>

    <header>
        <h1>Ù…Ø®ØªØ¨Ø± Ø£Ø¨Ùˆ Ø³Ù…Ø±Ø© ğŸ§ª</h1>
        <p>Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…ÙˆØ§Ø¯ Ù„Ø·Ø§ÙˆÙ„Ø© Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ø®Ù„Ø·Ù‡Ø§ ÙŠØ§ Ø¯ÙƒØªÙˆØ±!</p>
    </header>

    <div id="elements-scroll">
        </div>

    <div id="workbench">
        <div class="max-alert" id="max-msg">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5 Ù…ÙˆØ§Ø¯!</div>
        
        <div id="mix-zone">
            <div style="position: absolute; color: rgba(255,255,255,0.1); font-size: 3rem; font-weight: bold;">+</div>
        </div>

        <div id="result-area">
            <div class="result-text">
                <h3 id="res-title">Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙØ§Ø¹Ù„...</h3>
                <p id="res-equation">---</p>
            </div>
            <div style="font-size: 2rem;" id="res-icon">âš—ï¸</div>
        </div>

        <div class="controls">
            <button class="btn btn-reset" onclick="resetLab()">ØªÙ†Ø¸ÙŠÙ ğŸ§¹</button>
            <button class="btn btn-mix" onclick="calculateReaction()">Ø§Ø®Ù„Ø· Ø§Ù„Ù…ÙˆØ§Ø¯ ğŸ”¥</button>
        </div>
    </div>

    <div id="explosion-overlay">ğŸ’¥</div>

    <script>
        // =========================================
        // 1. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙˆØ§Ù„ØªÙØ§Ø¹Ù„Ø§Øª)
        // =========================================
        
        // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ø£Ø®ÙˆØ°Ø© Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙ‚Ø©
        const elements = [
            { sys: 'H', name: 'Ù‡ÙŠØ¯Ø±ÙˆØ¬ÙŠÙ†', type: 'gas', color: '#ff4757' },
            { sys: 'He', name: 'Ù‡ÙŠÙ„ÙŠÙˆÙ…', type: 'gas', color: '#ff4757' },
            { sys: 'Li', name: 'Ù„ÙŠØ«ÙŠÙˆÙ…', type: 'solid', color: '#2ed573' },
            { sys: 'C', name: 'ÙƒØ±Ø¨ÙˆÙ†', type: 'solid', color: '#2ed573' },
            { sys: 'N', name: 'Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†', type: 'gas', color: '#ff4757' },
            { sys: 'O', name: 'Ø£ÙƒØ³Ø¬ÙŠÙ†', type: 'gas', color: '#ff4757' },
            { sys: 'F', name: 'ÙÙ„ÙˆØ±', type: 'gas', color: '#ff4757' },
            { sys: 'Na', name: 'ØµÙˆØ¯ÙŠÙˆÙ…', type: 'solid', color: '#2ed573' },
            { sys: 'Mg', name: 'Ù…ØºÙ†ÙŠØ³ÙŠÙˆÙ…', type: 'solid', color: '#2ed573' },
            { sys: 'Al', name: 'Ø£Ù„Ù…Ù†ÙŠÙˆÙ…', type: 'solid', color: '#2ed573' },
            { sys: 'Si', name: 'Ø³ÙŠÙ„ÙŠÙƒÙˆÙ†', type: 'solid', color: '#2ed573' },
            { sys: 'Cl', name: 'ÙƒÙ„ÙˆØ±', type: 'gas', color: '#ff4757' },
            { sys: 'K', name: 'Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ…', type: 'solid', color: '#2ed573' },
            { sys: 'Ca', name: 'ÙƒØ§Ù„Ø³ÙŠÙˆÙ…', type: 'solid', color: '#2ed573' },
            { sys: 'Fe', name: 'Ø­Ø¯ÙŠØ¯', type: 'solid', color: '#2ed573' },
            { sys: 'Cu', name: 'Ù†Ø­Ø§Ø³', type: 'solid', color: '#2ed573' },
            { sys: 'Ag', name: 'ÙØ¶Ø©', type: 'solid', color: '#2ed573' },
            { sys: 'Au', name: 'Ø°Ù‡Ø¨', type: 'solid', color: '#2ed573' },
            { sys: 'Hg', name: 'Ø²Ø¦Ø¨Ù‚', type: 'liquid', color: '#1e90ff' },
        ];

        // ÙˆØµÙØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª (Ù…Ø±ØªØ¨Ø© Ø£Ø¨Ø¬Ø¯ÙŠØ§Ù‹ Ù„Ù„Ø±Ù…ÙˆØ² Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø¨Ø­Ø«)
        // Ø§Ù„Ù…ÙØªØ§Ø­ Ù‡Ùˆ Ø±Ù…ÙˆØ² Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù…Ø±ØªØ¨Ø© ÙˆÙ…ÙØµÙˆÙ„Ø© Ø¨ÙØ§ØµÙ„Ø©
        const reactions = {
            "H,H,O": { name: "Ø§Ù„Ù…Ø§Ø¡ (Water)", eq: "2H + O â†’ Hâ‚‚O", icon: "ğŸ’§", color: "#00d2ff" },
            "Cl,Na": { name: "Ù…Ù„Ø­ Ø§Ù„Ø·Ø¹Ø§Ù… (Table Salt)", eq: "Na + Cl â†’ NaCl", icon: "ğŸ§‚", color: "#ffffff" },
            "C,O,O": { name: "Ø«Ø§Ù†ÙŠ Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„ÙƒØ±Ø¨ÙˆÙ†", eq: "C + 2O â†’ COâ‚‚", icon: "â˜ï¸", color: "#aaaaaa" },
            "Fe,O": { name: "Ø£ÙƒØ³ÙŠØ¯ Ø§Ù„Ø­Ø¯ÙŠØ¯ (Ø§Ù„ØµØ¯Ø£)", eq: "4Fe + 3Oâ‚‚ â†’ 2Feâ‚‚Oâ‚ƒ", icon: "ğŸŸ¤", color: "#8B4513" },
            "Cl,H": { name: "Ø­Ø§Ù…Ø¶ Ø§Ù„Ù‡ÙŠØ¯Ø±ÙˆÙƒÙ„ÙˆØ±ÙŠÙƒ", eq: "H + Cl â†’ HCl", icon: "ğŸ§ª", color: "#ffff00" },
            "C,H,H,H,H": { name: "ØºØ§Ø² Ø§Ù„Ù…ÙŠØ«Ø§Ù†", eq: "C + 4H â†’ CHâ‚„", icon: "ğŸ”¥", color: "#add8e6" },
            "He,He": { name: "Ø¨Ø§Ù„ÙˆÙ† Ù‡ÙŠÙ„ÙŠÙˆÙ…", eq: "He (Ø®Ø§Ù…Ù„ Ù„Ø§ ÙŠØªÙØ§Ø¹Ù„)", icon: "ğŸˆ", color: "#ff6b81" },
            "Au,Ag": { name: "Ø³Ø¨ÙŠÙƒØ© Ø°Ù‡Ø¨ ÙˆÙØ¶Ø©", eq: "Au + Ag â†’ Alloy", icon: "ğŸ’", color: "#eccc68" }
        };

        // =========================================
        // 2. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        // =========================================
        
        const scrollContainer = document.getElementById('elements-scroll');
        const mixZone = document.getElementById('mix-zone');
        let currentMix = [];

        // Ø±Ø³Ù… Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ
        elements.forEach(el => {
            const div = document.createElement('div');
            div.className = `element-card type-${el.type}`;
            div.innerHTML = `<span class="element-symbol">${el.sys}</span><span class="element-name">${el.name}</span>`;
            div.onclick = () => addToBench(el); // Ù„Ù„Ù†Ù‚Ø± (Ø¬ÙˆØ§Ù„ ÙˆÙƒÙ…Ø¨ÙŠÙˆØªØ±)
            scrollContainer.appendChild(div);
        });

        // =========================================
        // 3. Ø§Ù„Ù…Ù†Ø·Ù‚ (Ø¥Ø¶Ø§ÙØ© ÙˆØ®Ù„Ø·)
        // =========================================

        function addToBench(element) {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ (5)
            if (currentMix.length >= 5) {
                showMaxAlert();
                return;
            }

            currentMix.push(element.sys);
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¨
            const beaker = document.createElement('div');
            beaker.className = 'beaker';
            beaker.style.setProperty('--liquid-color', element.color);
            beaker.innerHTML = `<span>${element.sys}</span>`;
            
            mixZone.appendChild(beaker);
            
            // Ø§Ù‡ØªØ²Ø§Ø² Ø®ÙÙŠÙ
            if("vibrate" in navigator) navigator.vibrate(20);
        }

        function calculateReaction() {
            if (currentMix.length === 0) return;

            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø£Ø¨Ø¬Ø¯ÙŠØ§Ù‹ Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ù…Ø¹ Ø§Ù„ÙˆØµÙØ§Øª
            const mixKey = [...currentMix].sort().join(',');

            const result = reactions[mixKey];

            if (result) {
                // Ù†Ø¬Ø§Ø­ Ø§Ù„ØªÙØ§Ø¹Ù„
                showResult(result.name, result.eq, result.icon);
                mixZone.innerHTML = `<div class="beaker" style="width:100px; height:120px; --liquid-color:${result.color}"><span>${result.icon}</span></div>`;
                currentMix = []; // ØªØµÙÙŠØ± Ø§Ù„Ù…ØµÙÙˆÙØ© Ù„ÙƒÙ† ØªØ±Ùƒ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            } else {
                // ÙØ´Ù„ (Ø§Ù†ÙØ¬Ø§Ø±)
                triggerExplosion();
                showResult("ØªÙØ§Ø¹Ù„ ØºÙŠØ± Ù…Ø³ØªÙ‚Ø±!", "Boom! (ØªØ¬Ø±Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©)", "ğŸ’¥");
                currentMix = [];
                mixZone.innerHTML = ''; // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©
            }
        }

        function resetLab() {
            currentMix = [];
            mixZone.innerHTML = '<div style="position: absolute; color: rgba(255,255,255,0.1); font-size: 3rem; font-weight: bold;">+</div>';
            showResult("Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙØ§Ø¹Ù„...", "---", "âš—ï¸");
        }

        // =========================================
        // 4. Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø¨ØµØ±ÙŠØ©
        // =========================================

        function showResult(title, eq, icon) {
            document.getElementById('res-title').innerText = title;
            document.getElementById('res-equation').innerText = eq;
            document.getElementById('res-icon').innerText = icon;
        }

        function showMaxAlert() {
            const msg = document.getElementById('max-msg');
            msg.style.opacity = '1';
            setTimeout(() => { msg.style.opacity = '0'; }, 1500);
        }

        function triggerExplosion() {
            const overlay = document.getElementById('explosion-overlay');
            overlay.classList.add('boom-anim');
            
            // Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„Ø´Ø§Ø´Ø©
            document.body.style.transform = "translate(5px, 5px)";
            setTimeout(() => document.body.style.transform = "translate(-5px, -5px)", 50);
            setTimeout(() => document.body.style.transform = "translate(5px, -5px)", 100);
            setTimeout(() => document.body.style.transform = "translate(0, 0)", 150);

            if("vibrate" in navigator) navigator.vibrate([100, 50, 100]);

            setTimeout(() => {
                overlay.classList.remove('boom-anim');
            }, 500);
        }

    </script>
</body>
</html>
